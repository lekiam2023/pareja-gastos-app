version: "3.9"

services:
  backend:
    build:
      context: ./server  #Ruta relativa al compose 
      dockerfile: backend.Dockerfile
    container_name: backend    
    ports:
      - "${BACKEND_PORT}:4000"
    env_file:
      - ./config/.env.dev
    depends_on:
      - db
   
     
  db:
     image: mysql:8.0
     container_name: mysql
     restart: always
     environment:
       MYSQL_ROOT_PASSWORD: ${DB_PASSWORD}
       MYSQL_DATABASE: ${DB_NAME}
     ports:
       - "3306:3306"
     volumes:
       - mysql_data:/var/lib/mysql
       - ./db:/docker-entrypoint-initdb.d
       
volumes:
   mysql_data:    

